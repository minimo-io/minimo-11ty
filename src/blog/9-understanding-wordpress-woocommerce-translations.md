---
date: 2024-02-19T16:12:00-03:00
title: "Understanding Wordpress translation system"
description: "A practical guide of the common errors (and solutions) when translating Wordpress & Woocommerce"
image: "/assets/images/blog/wordpress-i18n.webp"
tags:
  - wordpress
  - woocommerce
  - coding
  - fiverr
---

## Intro.

Over 810 million websites are estimated to use [WordPress](/tag/wordpress/) (representing 40% of all websites on the Internet), and estimates suggest that [Woocommerce](/tag/woocommerce/) powers over 5 millon active online stores.

For someone offering services related to those technologies (currently through **[Fiverr ‚û°Ô∏è Profile here](https://www.fiverr.com/minimo_labs))** sounds like a nice client base. Everyones goto platform is Wordpress related, which also leads to many misuses and pitiful configurations (to not talk about performance!)

So after being confronted to every kind of confussions from clients asking for my services at Fiverr, I decided to create the simplest, minimal guide possible, to explain how Wordpress Translations work (and how they don't), taking some of those confussions as a starting point.

The identity of the aforementioned will remain anonymous üòú
But first, let's understand how Wordpress translations actually work.

## How does Wordpress translations actually work?

Here we will cover the basics of Wordpress translations, from the practical to the theorical, convering:

1. **What are pot, po and mo files?**
2. **Loading translations**
3. **Wordpress translation functions**

---

### 1. What are pot, po and mo files?

Wordpress (and all of its plugins like Woocommerce or Budypress) use the GNU gettext internationalization (i18n) and localization (l10n) system for writing multi-lingual programs.

The file extensions used by this system are: .POT (Portable Object Template), .PO (Portable Object) and .MO (Machine Object) files, more [here at Wikipedia](https://en.wikipedia.org/wiki/Gettext).

The idea behind using a system like this is to **separate programming from translating**, so themes, child themes and plugins can be easily translated into other languages by specialist with no undestanding of coding.

* **POT files** (`.pot`): The first step for the internationalization of our theme or plugin is to create our `.pot` file. This file will have no translations of its own, but **it will be the template for all localization files to come**.
These files are often created by the developer and make available in the `./languages` folder of a theme or plugin.
<br><br>
A `wp-cli` command line tool command can be run to scan the theme or plugin for available internationalization strings.
[WP-cli](https://wp-cli.org/) is a command-line interface for Wordpress.
<br><br>
It is worth mentioning that the theme must be developed with this in mind, using Wordpress internationalization functions (more in the next section). On the contrary our resulting `.pot` file will have no translatable strings or texts.
<br><br>
**Many times, a client comes asking for me to translate a theme that it was not created with this capability. In such cases it is mandatory to do some development work in order to make the required texts translatable**. It is sometimes hard to make the client understand that this not a translation work, but a development shenanigan. 
<br><br>
Also in these cases it is better to contact the original developer itself first, and ask for an internationalization-ready theme or plugin, in order to avoid conflicting versions. Other times this can be partially solved with the development of child theme.
<br><br>
In case its all good with our code, we can run the following `wp-cli` command, and create our `.pot` file.
<br><br>
```bash
wp i18n make-pot ~/Wordpress/wp-content/themes/my-theme/
```

* **PO files** (`.po`): A translator will take the `.pot` template file and translate the strings using a software like [Poedit](https://poedit.net/) or [GlotPress](https://glotpress.blog/) (web-based). The translator will choose the target locale, translate all or some of the strings and a `.po` file will be created. 
<br><br>
In case a plugin or a themes continues its development cycle and more translations are added, a new `.pot` file will be generated by the developer, and the initial `.po` translation can be updated with the new strings, to be in turn, also translated.
<br><br>
Sometimes `.po` files are only partially translated, resulting in partial texts translations in the front-end of the site. This can be easily checked opening the `.po` file being loaded and searching for the un-translated string detected in the site.
<br><br>
It is often the case that some of this strings were not correctly created by the developer. Which require, in many cases, some nasty hacks to solve.

<center>FIVERR; HERE! ME!</center>

* **MO files** (`.mo`): From a `.po` file, all nice and ready with all (or some) translations a `.mo` binary file is **compiled** by the software. This file contains all the original strings and their translations, in a format ready for fast extraction. These are the real translations files used by the Wordpress software and all its plugins.

### 2. Loading Translations

```php
/*
* Theme Name: My Theme
* Author: Theme Author
* Text Domain: my-theme
*/
```
A key concept when loading Wordpress translations is the "text domain" of our theme or plugin. 

The "Text Domain" is a unique identifier that WordPress will use to load the necessary translation specific files to our theme, child theme or plugin. Specifically our `.mo` files.

The **Text Domain** is defined in the header of our style.css file. It must be in lower case, without spaces and if necessary we must use hyphens instead of underscores.

The next step is to check where our translation files are being searched for. The standard for themes and plugins is to configure these files to be loaded in a ‚Äúlanguages‚Äù folder, located in the root directory of our WordPress theme, child theme or plugin.

The special function `load_theme_textdomain` is used in order to specify this.

```php
function mytheme_setup{
    load_theme_textdomain( 'my-theme', get_template_directory() . '/languages'  );
}
```

Then that setup can be attached to 

The .mo files must be named based on the locale exactly. Meaning that `/languages/`folder, inside a theme or plugin root, a Brazilian Portuguese translation file should be `pt_BR.mo` and `pt_BR.po`.

Now, many non-experienced Wordpress users that want to modify a plugin or theme translations, usually grabs that same `.po` file, edit with PoEdit and save the changes. **This normally results in modifications being overriden once the plugin or theme is updated**.

#### How to solve this?

Wordpress will check for other directories for each theme or plugin translation files.
So, in case you need to modify a translation (or create one using the `.pot` files provided by the developer), **the resulting files must be placed in other directory, specifically at the `wp-content/languages/` folder**.

If translation are for a theme you should place your files at `wp-content/languages/themes/` and `wp-content/languages/plugins` well, for plugins. A special consideration should be taken in relation to the file names.

So for example, if our theme has a text-domain of `twentytwentyfour`, then our Brazilian Portuguese translation files should be named `twentytwentyfour-pt_BR.mo` and `.po` respectively.
If the configured locale for our Wordpress instance is `pt_BR` then translations will be loaded from that file, which takes priority.

This is very important, and often a cause of confussions on whay translations are not loading correctly.

To configure our locale for our Wordpress instance we must go to `Configurations > General` or setup a `WPLANG`constant in our `wp-config.php` file.

### 3. Wordpress translation functions

https://wordpress.stackexchange.com/questions/57735/whats-the-point-on-gettext-syntax
http://ottopress.com/2012/more-internationalization-fun/


### Confussion #1
#### Themes and child themes

> Basically i want to keep the parent them in English and have a Portuguese translation in the child theme therefore the website will have two languages

### Confussions #2. 
#### Site language
Check the **Site language** was configured to "nb_NO" in order for Woocommerce and all other plugins to pick the right translations files (previously was configured to en_US), (remembering that all translations must be kept in the /wp/wp-content/langauges/ directory, to avoid resets on updates).

I have fixed this. With the fix many translations are now displayed correctly (see screenshot 1), but not all (why below).

3. In Wordpress not all translations are handled by the theme. Each plugin has its own translations files. Many plugins participate in the front-end screen rendering in this case, so their translations files must also be translated. One example of this is the whishlist plugin I detected "WPC Smart Wishlist for WooCommerce (Premium)" (see screenshot 2). It was not translated with the change previously mentioned because its translations files for the "nb_NO" language do not exist. We must create it, translated them and upload it in the correct folder with the correct naming. Let me know if you want me to translate these other files, or if you that know the language will do it for me to install them (I will have to charge a little extra for the extra hours).

4. Other texts are not part of translation files but part of the content. In this cases we must detect and change the text from each individual content piece (article or block), using the Elementor interface. If you allow me I can change the ones I detect for you (see screenshot 3).

5. Finally I need to know if you also want the admin interface translated too, to "nb_NO" language or if you want to keep it in english.